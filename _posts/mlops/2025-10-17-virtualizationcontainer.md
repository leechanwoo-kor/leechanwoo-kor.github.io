---
title: "[MLOps] 가상화와 컨테이너"
categories:
  - MLOps
tags:
  - MLOps
  - Visualization
  - Container
toc: true
toc_sticky: true
toc_label: "가상화와 컨테이너"
toc_icon: "sticky-note"
---

<br>

<img width="961" height="591" alt="container drawio" src="https://github.com/user-attachments/assets/e75181cd-e0f4-49e3-b11f-f42c1e828446" />

<br>

## 도커 컨테이너 라이프 사이클

- 생성: 컨테이너 레이어가 생성된 상태
- 실행: 컨테이너 내 프로세스가 실행된 상태
- 정지: 컨테이너 내 프로세스가 종료된 상태
- 일시 정지: 컨테이너 내 프로세스가 일시 정지된 상태
- 삭제: 컨테이너 레이어가 삭제된 상태

### 요약

- 라이플 사이클은 컨테이너가 생성된 후 삭제될 때까지의 상태 흐름이다.
- 컨테이너는 생성, 실행, 정지, 일시 정지, 삭제 상태를 취할 수 있다.
- 컨테이너 상태는 도커 명령어의 실행으로 변경된다.

<br>

## 도커 엔진과 도커 데몬

<img width="850" height="782" alt="docker drawio" src="https://github.com/user-attachments/assets/78f39b45-debd-4b83-8e08-f439e6950dcc" />

<br>

- 도커 데몬은 도커 클라이언트의 요청에 따라 도커 객체를 관리한다.
- 도커 객체는 도커 데몬의 관리 대상이며 컨테이너 및 컨테이너 이미지를 포함한다.
- 도커 데몬은 도커 클라이언트의 요청을 수락하기 위한 API가 있다.

### 바인드 마운트와 네임 스페이스

볼륨과 비슷한 기능으로 `바인드 마운트`라는 기능이 있는데 바인드 마운트는 호스트 운영 체제의 파일 시스템을 컨테이너에 마운트한다는 점이 볼륨과 다르다. 바인드 마운트 역시 파일 시스템을 공유할 수 있지만 제약이 많기 때문에 파일 시스템을 공유할 때는 볼륨을 사용하는 편이 낫다. 바인드 마운트는 주로 호스트와 컨테이너 간에 파일 시스템을 공유하기 위해 사용된다.

### "보이지 않는다면 없는 것과 같다"

도커는 네임스페이스를 이용해 다른 컨테이너와 격리하는데 네임 스페이스의 실제 역할은 내부에서 외부를 볼 수 없게 하는 것 뿐이다.

- 도커는 프로세스별로 컨테이너를 분리하는 것을 추천한다.
- 볼륨은 컨테이너가 읽고 쓰는 데이터를 지속화하기 위한 방법이다.
- 볼륨을 사용하면 여러 컨테이너에서 파일 시스템을 공유할 수 있다.
- 네임 스페이스는 내부 프로세스가 외부 프로세스와 격리된 것처럼 보이는 방식이다.
- 도커는 네임스페이스의 작동 방식을 사용해 컨테이너를 다른 컨테이너와 격리한다.
- 컨트롤 그룹은 컨테이너가 하드웨어 리소스 사용량을 제한하는 방법이다.
- 컨트롤 그룹으로 하드웨어 리소스 사용량에 상한선을 설정함으로써 특정 컨테이너가 시스템 리소스를 소모해 다른 컨테이너에 영향을 미치는 상황을 방지한다.

### 도커 컨테이너 이미지

- 차분 관리는 기준과의 차이점을 기록하고 변경을 관리하는 방법이다.
- 컨테이너 이미지에 포함된 파일 시스템은 직전과의 차이를 기록하는 여러 레이어로 구성된다.
- 차분 관리 덕분에 시작할 때 복사할 필요가 없으므로 빠르게 배포할 수 있다.
- 컨테이너를 실행하면 이미지 레이어 위에 프로세스에 따른 파일 추가나 변경 사항을 기록하는 레이어가 생성된다. 이 레이어를 컨테이너 레이어라고 하며 기록할 수 있다는 점이 읽기 전용인 이미지 레이어와 다르다.
- 컨테이너의 프로세스가 이미지 레이어에 포함된 파일을 수정하려고 하면 대상 파일을 이미지 레이어에서 컨테이너 레이어로 복사한 다음, 복사된 파일을 변경한다. 이러한 변경 방법은 카피 온 라이트 전략이라고 하며 도커의 파일 읽기 및 쓰기의 속도가 빨라지도록 지원한다.

<br>

## 쿠버네티스

- 컨테이너 오케스트레이션은 컨테이너 관리 및 운영을 자동화한다.
- 컨테이너의 관리 및 운영에는 로드 밸런싱, 헬스 체크, 스케일링 등이 필요하다.
- 컨테이너를 활용한 애플리케이션이 보급되고 그 규모가 커질수록 컨테이너 오케스트레이션은 점점 더 중요해질 것이다.

[추가 작성] ...













