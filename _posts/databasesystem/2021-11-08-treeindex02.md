---
title: "[Database System] Tree Index"
categories:
  - Database System
tags:
  - Database System
  - Tree Index
toc: true
toc_sticky: true
toc_label: "Tree Index"
toc_icon: "sticky-note"
---

# Database System

## Equality/Range Search

### Equality Search

- 주어진 검색 키 K로 레코드 찾기; 루트에서 시작하여 적절한 트리 포인터를 찾으십시오.
- 그런 다음 올바른 리프 노드에 도달할 때까지 다음 레벨로 포인터를 반복해서 따라갑니다.
- K가 Kj와 같으면 데이터 포인터 Pj를 따라 값이 K인 레코드를 찾습니다.
- 키가 20인 레코드를 찾으려면 ?
![image](https://user-images.githubusercontent.com/55765292/140866239-b333a33f-7b7a-46f2-9b03-27a2d6045a40.png)

### Algorithm Equality Search

- 키 값이 K인 레코드 찾기

```
Algorithm Equality Search (K, p)
  p ← root node page;
  read page p into main memory buffer;      
  while (p is not a leaf page) do
    { /* In-Memory Search */
      if K < p.K1 then p = p.P1
      else if K >= p.Km-1 then p = p.Pm
      else
        {
          search page p for entry i such that p.Ki-1 ≤ K < p.Ki
          p ← i ;
        }
      read page p into memory buffer;
    }
    search leaf page p for entry (Ki , Pri ) with K = Ki ;  
    if found, then read data page with address Pri ;
```

### Range Search

- B+ 트리는 {<, >, >=, ... } 를 사용하는 **range** 쿼리에도 유용합니다.
- 범위가 Ka ≤ K ≤ Kb인 키 값이 있는 모든 레코드를 찾으려면

1. Equality Search 알고리즘을 사용하여 키 값 Ka를 검색합니다. Ka가 있을 수 있는 리프 노드에서 키 >= Ka를 검색합니다.
2. 획득한 키 값이 ≤ Kb인 한, 오른쪽 잎 블록 포인터를 따라 후속 블록을 추적하고 키 값을 계속 검사합니다.
3. ≥ Kb 값을 찾거나 블록 체인이 끝날 때까지 2단계를 반복합니다.
