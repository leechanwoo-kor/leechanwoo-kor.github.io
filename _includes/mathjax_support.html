<!-- MathJax - Lazy loaded for better performance -->
<script>
  window.MathJax = {
    tex2jax: {
      inlineMath: [['$', '$']],
      displayMath: [['$$', '$$']],
      processEscapes: true
    },
    TeX: {
      equationNumbers: { autoNumber: "AMS" }
    },
    messageStyle: "none"
  };

  function loadMathJax() {
    if (window.mathJaxLoaded) return;
    window.mathJaxLoaded = true;
    var script = document.createElement('script');
    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML';
    script.async = true;
    document.head.appendChild(script);
  }

  // Load MathJax after page is interactive
  if (document.readyState === 'complete') {
    loadMathJax();
  } else {
    window.addEventListener('load', loadMathJax);
  }
</script>
